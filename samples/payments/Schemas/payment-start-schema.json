{
    "key": "payment-start-validation",
    "version": "1.0.0",
    "domain": "core",
    "flow": "sys-schemas",
    "flowVersion": "1.0.0",
    "tags": [
        "payments",
        "validation",
        "scheduled-payments",
        "start-transition"
    ],
    "attributes": {
        "type": "transition",
        "$schema": "http://json-schema.org/draft-07/schema#",
        "$id": "https://schemas.vnext.com/payments/start-transition.json",
        "title": "Payment Start Transition Schema",
        "description": "Schema validation for scheduled payments workflow start transition payload",
        "schema": {
            "type": "object",
            "required": [
                "userId",
                "amount",
                "currency",
                "frequency",
                "startDate",
                "endDate",
                "paymentMethodId",
                "recipientId"
            ],
            "properties": {
                "userId": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "Unique identifier for the user initiating the payment schedule"
                },
                "amount": {
                    "type": "number",
                    "minimum": 0.01,
                    "multipleOf": 0.01,
                    "description": "Payment amount (supports decimal values for cents)"
                },
                "currency": {
                    "type": "string",
                    "enum": [
                        "TL",
                        "USD",
                        "EUR",
                        "GBP"
                    ],
                    "description": "Currency code for the payment"
                },
                "frequency": {
                    "type": "string",
                    "enum": [
                        "daily",
                        "weekly",
                        "monthly",
                        "quarterly",
                        "yearly"
                    ],
                    "description": "Payment frequency schedule"
                },
                "startDate": {
                    "type": "string",
                    "format": "date-time",
                    "description": "ISO 8601 date-time when payments should start"
                },
                "endDate": {
                    "type": "string",
                    "format": "date-time",
                    "description": "ISO 8601 date-time when payments should end"
                },
                "paymentMethodId": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Identifier for the payment method to be used"
                },
                "description": {
                    "type": "string",
                    "maxLength": 500,
                    "description": "Optional description for the payment schedule"
                },
                "recipientId": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Identifier for the payment recipient"
                },
                "isAutoRetry": {
                    "type": "boolean",
                    "default": false,
                    "description": "Whether to automatically retry failed payments"
                },
                "maxRetries": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 10,
                    "default": 3,
                    "description": "Maximum number of retry attempts for failed payments"
                }
            },
            "additionalProperties": false,
            "if": {
                "properties": {
                    "isAutoRetry": {
                        "const": true
                    }
                }
            },
            "then": {
                "properties": {
                    "maxRetries": {
                        "minimum": 1
                    }
                }
            }
        }
    }
}